webpackJsonp([1],{238:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,r,u,d,c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(1),h=n(f),m=a(15),p=n(m),y=a(170),b=n(y),v=a(42),g=function(e){function t(e){l(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.state={count:0,ask:"",nextask:"",answer:""},a.toggle=a.toggle.bind(a),a.timerOn=a.timerOn.bind(a),a.timerOff=a.timerOff.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.handleNextAskChange=a.handleNextAskChange.bind(a),a}return i(t,e),c(t,[{key:"loadajax",value:function(e){var t=location.hostname;"127.0.0.1"==t&&(t="www.test.com"),d=new XMLHttpRequest,d.open("GET","http://"+t+":8000/chat/"+e,!0),d.onload=function(){if(d.status>=200&&d.status<400){var e=JSON.parse(d.responseText);this.setState({answer:e.answer})}}.bind(this),d.onerror=function(){},d.send()}},{key:"timerOff",value:function(){clearInterval(s),s=0,this.setState({count:0})}},{key:"timerOn",value:function(){var e=this;s=setInterval(function(){e.setState({count:e.state.count+1})},3500)}},{key:"toggle",value:function(){var e=p["default"].findDOMNode(this.refs.label_typing);"hidden"===e.style.visibility?e.style.visibility="":e.style.visibility="hidden"}},{key:"componentWillReceiveProps",value:function(e){if(r=e.data,this.setState({ask:"Hei "+r.Name+"!"}),"on"===e.timerHandler){p["default"].findDOMNode(this.refs.answer).style.display="none",u=b["default"].v4();var t=u+"/"+r.Phone+"/"+encodeURIComponent(this.state.ask);this.loadajax(encodeURIComponent(t)),this.timerOn()}else console.log("STOP timeR"),this.timerOff()}},{key:"componentWillUpdate",value:function(e){this.state.count>7?(p["default"].findDOMNode(this.refs.label_typing).style.visibility="hidden",p["default"].findDOMNode(this.refs.answer).style.display="",this.timerOff()):0!==this.state.count&&this.toggle()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"componentWillMount",value:function(){this.setState({nextask:""}),this.setState({ask:""})}},{key:"componentDidMount",value:function(){r=this.props.data,this.setState({ask:"Hei "+r.Name+"!"});var e=p["default"].findDOMNode(this.refs.answer);e.style.display="none"}},{key:"componentWillUnmount",value:function(){this.timerOff()}},{key:"handleSubmit",value:function(e){if(this.state.nextask.length>0){e.preventDefault(),this.state.ask=this.state.nextask.trim(),this.state.nextask="",p["default"].findDOMNode(this.refs.answer).style.display="none",this.timerOn();var t=u+"/"+r.Phone+"/"+encodeURIComponent(this.state.ask);this.loadajax(encodeURIComponent(t))}}},{key:"handleNextAskChange",value:function(e){this.setState({nextask:e.target.value})}},{key:"render",value:function(){var e=this.props.data,t="odotta",a=this.state.answer,n=this.state.ask;this.state.count>2&&(t="delivered"),this.state.count>5&&(t="seen"),this.state.count>7&&(t="typing");var l=location.hostname;"127.0.0.1"==l&&(l="www.test.com");var o="http://"+l+":8000/img/"+e.ImgId+"/"+e.Img_file_name+"/250/350";return h["default"].createElement("div",null,h["default"].createElement(v.Row,null,h["default"].createElement(v.Col,{xs:6,md:4},h["default"].createElement(v.Label,{bsStyle:"danger",bsClass:"mbigphone"},h["default"].createElement("span",{className:"glyphicon glyphicon-earphone","aria-hidden":"true"})," ",e.Phone),h["default"].createElement(v.Image,{className:"media-object boxImageSmall",src:o,thumbnail:!0},h["default"].createElement("p",{className:"chatunderphoto"},e.Name," ",e.Age,"v "),h["default"].createElement("p",null,e.City))),h["default"].createElement(v.Col,{xs:12,md:8},h["default"].createElement(v.Badge,{ref:"label_typing"},t),h["default"].createElement(v.Alert,null,n),h["default"].createElement("div",{ref:"answer"},h["default"].createElement(v.Alert,{bsStyle:"danger"},a),h["default"].createElement("form",{onSubmit:this.handleSubmit},h["default"].createElement(v.Input,{type:"text",label:"------------",placeholder:"Kysy√§ jotain!",value:this.state.nextask,onChange:this.handleNextAskChange})),h["default"].createElement(v.Button,{bsStyle:"primary",onClick:this.handleSubmit},"Jatkaa")))))}}]),t}(h["default"].Component);e.exports=g},239:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(1),u=n(r),d=a(42),c=a(51),f=a(15),h=n(f),m=a(103),p=n(m),y=a(238),b=n(y),v=function(e){function t(e){l(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.state={data:[],timerHandler:"",showModal:!1},a.handleToggleDetailsChat=a.handleToggleDetailsChat.bind(a),a.handleModal=a.handleModal.bind(a),a}return i(t,e),s(t,[{key:"loadajax",value:function(e){var t=location.hostname;"127.0.0.1"==t&&(t="www.test.com");var a=new XMLHttpRequest;a.open("GET","http://"+t+":8000/api/"+e,!0),a.onload=function(){if(a.status>=200&&a.status<400){var e=JSON.parse(a.responseText);this.setState({data:e}),console.log("data",e)}else console.log("not found equest.status ",equest.status)}.bind(this),a.onerror=function(){},a.send()}},{key:"handleToggleDetailsChat",value:function(){var e=h["default"].findDOMNode(this.refs.chat).style.display;"none"===e?(this.setState({timerHandler:"on"}),h["default"].findDOMNode(this.refs.chat).style.display="",h["default"].findDOMNode(this.refs.details).style.display="none"):(this.setState({timerHandler:"off"}),h["default"].findDOMNode(this.refs.chat).style.display="none",h["default"].findDOMNode(this.refs.details).style.display="")}},{key:"handleReturn",value:function(){c.browserHistory.push("/")}},{key:"handleModal",value:function(){this.state.showModal?this.setState({showModal:!1}):this.setState({showModal:!0})}},{key:"componentWillMount",value:function(){this.loadajax(this.props.params.id)}},{key:"componentDidMount",value:function(){h["default"].findDOMNode(this.refs.chat).style.display="none"}},{key:"componentWillReceiveProps",value:function(){}},{key:"componentWillUpdate",value:function(e){}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this.state.data,t={title:e.Moto},a=location.hostname;"127.0.0.1"==a&&(a="www.test.com");var n="http://"+a+":8000/img/"+e.ImgId+"/"+e.Img_file_name+"/250/350",l="http://"+a+":8000/fullimage/"+e.ImgId+"/original/"+e.Img_file_name;return u["default"].createElement("div",null,u["default"].createElement(p["default"],t),u["default"].createElement(d.Button,{onClick:this.handleReturn,className:"bigclose",bsStyle:"danger",bsSize:"large",active:!0},"Palata"),u["default"].createElement("div",{ref:"details"},u["default"].createElement(d.Label,{bsStyle:"danger",bsClass:"mbigphone"},u["default"].createElement("span",{className:"glyphicon glyphicon-earphone","aria-hidden":"true"})," ",e.Phone),u["default"].createElement("div",{className:"media "},u["default"].createElement("div",{className:"media-left "},u["default"].createElement(d.Image,{onClick:this.handleModal,className:"media-object boxImageSmall",src:n,thumbnail:!0})),u["default"].createElement("div",{className:"media-body"},u["default"].createElement("p",{className:"detailsname"},e.Name," ",this.state.data.Age,"v "),u["default"].createElement("p",null,e.City),u["default"].createElement(d.Button,{onClick:this.handleToggleDetailsChat,bsStyle:"primary",bsSize:"large",active:!0},"Chatti")))),u["default"].createElement("div",{ref:"chat"},u["default"].createElement(b["default"],{data:e,timerHandler:this.state.timerHandler})),u["default"].createElement("p",{className:"transparent"},e.Description),u["default"].createElement(d.Modal,{show:this.state.showModal,onHide:this.close},u["default"].createElement(d.Modal.Header,null,u["default"].createElement(d.Button,{className:"pull-right",onClick:this.handleModal},"Close"),u["default"].createElement(d.Modal.Title,null,e.Name," ",e.Age,"v ",e.City)),u["default"].createElement(d.Modal.Body,null,u["default"].createElement(d.Image,{src:l,responsive:!0,thumbnail:!0})),u["default"].createElement(d.Modal.Footer,null)))}}]),t}(u["default"].Component);e.exports=v}});